name: reviewdog
on: [pull_request]
jobs:
  remark-lint:
    name: runner / remark-lint
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v1
        with:
          fetch-depth: 0
      - run: echo "CHANGED_FILES=$(git diff --diff-filter=AM --name-only origin/${{ github.base_ref }} | grep '^docs' | tr '\n' ' ')" >> $GITHUB_ENV
      - name: Run remark-lint with reviewdog for documentation projects
        uses: CivicActions/action-remark-lint-docs@v3.8.0
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          reporter: github-pr-check
          remark_paths: "${{ env.CHANGED_FILES }}"